# Javascript - Native code

**Point:** 15 Points 

## Solution:

A pop-up requires password: 

<p align="center"><img width="400px" height="150px" src="https://user-images.githubusercontent.com/48288606/158044978-6737c700-541e-4190-b562-44c905c95962.png" /> </p>

Open "Developer Tools" -> Source -> ch16.html:

```html
<html>
<head>
<title>Plop</title>
</head>
<body><link rel='stylesheet' property='stylesheet' id='s' type='text/css' href='/template/s.css' media='all' /><iframe id='iframe' src='https://www.root-me.org/?page=externe_header'></iframe>

<script>
É=-~-~[],ó=-~É,Ë=É<<É,þ=Ë+~[];Ì=(ó-ó)[Û=(''+{})[É+ó]+(''+{})[ó-É]+([].ó+'')[ó-É]+(!!''+'')[ó]+({}+'')[ó+ó]+(!''+'')[ó-É]+(!''+'')[É]+(''+{})[É+ó]+({}+'')[ó+ó]+(''+{})[ó-É]+(!''+'')[ó-É]][Û];Ì(Ì((!''+'')[ó-É]+(!''+'')[ó]+(!''+'')[ó-ó]+(!''+'')[É]+((!''+''))[ó-É]+([].$+'')[ó-É]+'\''+''+'\\'+(ó-É)+(É+É)+(ó-É)+'\\'+(þ)+(É+ó)+'\\'+(ó-É)+(ó+ó)+(ó-ó)+'\\'+(ó-É)+(ó+ó)+(É)+'\\'+(ó-É)+(É+ó)+(þ)+'\\'+(ó-É)+(É+ó)+(É+ó)+'\\'+(ó-É)+(ó+ó)+(ó-ó)+'\\'+(ó-É)+(ó+ó)+(É+É)+'\\'+(É+ó)+(ó-ó)+'\\'+(É+É)+(þ)+'\\'+(ó-É)+(ó-ó)+(É+ó)+'\\'+(ó-É)+(É+ó)+(ó+ó)+'\\'+(ó-É)+(ó+ó)+(É+É)+'\\'+(ó-É)+(ó+ó)+(É)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(ó-É)+(þ)+(É)+'\\'+(É+É)+(ó-ó)+'\\'+(ó-É)+(É+ó)+(É+É)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(É+É)+(ó-ó)+'\\'+(ó-É)+(É+ó)+(É+ó)+'\\'+(ó-É)+(É+ó)+(þ)+'\\'+(ó-É)+(ó+ó)+(É+É)+'\\'+(É+É)+(ó-ó)+'\\'+(ó-É)+(É+É)+(É+É)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(É+É)+(ó-ó)+'\\'+(ó-É)+(ó+ó)+(ó-ó)+'\\'+(ó-É)+(É+É)+(ó-É)+'\\'+(ó-É)+(ó+ó)+(ó)+'\\'+(ó-É)+(ó+ó)+(ó)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(É+É)+(þ)+'\\'+(É+ó)+(ó-É)+'\\'+(þ)+(ó)+'\\'+(ó-É)+(É+ó)+(ó-É)+'\\'+(ó-É)+(É+É)+(ó+ó)+'\\'+(É+ó)+(ó-ó)+'\\'+(ó-É)+(É+É)+(ó-É)+'\\'+(þ)+(É+ó)+'\\'+(þ)+(É+ó)+'\\'+(É+É)+(þ)+'\\'+(ó-É)+(ó+ó)+(É+É)+'\\'+(ó-É)+(É+ó)+(þ)+'\\'+(ó-É)+(ó+ó)+(É+É)+'\\'+(ó-É)+(É+ó)+(þ)+'\\'+(ó+ó)+(ó-É)+'\\'+(ó+ó)+(É)+'\\'+(ó+ó)+(ó)+'\\'+(ó-É)+(É+ó)+(É+É)+'\\'+(ó-É)+(É+ó)+(þ)+'\\'+(ó-É)+(É+ó)+(É+É)+'\\'+(É+É)+(þ)+'\\'+(É+ó)+(ó-É)+'\\'+(ó-É)+(þ)+(ó)+'\\'+(ó-É)+(É+É)+(ó-É)+'\\'+(ó-É)+(É+ó)+(É+É)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(ó-É)+(ó+ó)+(É)+'\\'+(ó-É)+(ó+ó)+(É+É)+'\\'+(É+ó)+(ó-ó)+'\\'+(É+É)+(þ)+'\\'+(ó-É)+(É+É)+(É)+'\\'+(ó-É)+(ó+ó)+(É)+'\\'+(ó-É)+(É+É)+(ó-É)+'\\'+(ó-É)+(ó+ó)+(ó+ó)+'\\'+(ó-É)+(É+ó)+(þ)+'\\'+(É+É)+(þ)+'\\'+(É+ó)+(ó-É)+'\\'+(þ)+(ó)+'\\'+(ó-É)+(þ)+(É+ó)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(ó-É)+(É+ó)+(É+É)+'\\'+(ó-É)+(ó+ó)+(ó)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(ó-É)+(þ)+(ó)+'\\'+(ó-É)+(É+É)+(ó-É)+'\\'+(ó-É)+(É+ó)+(É+É)+'\\'+(ó-É)+(É+É)+(É+ó)+'\\'+(ó-É)+(ó+ó)+(É)+'\\'+(ó-É)+(ó+ó)+(É+É)+'\\'+(É+ó)+(ó-ó)+'\\'+(É+É)+(þ)+'\\'+(ó-É)+(É+É)+(ó+ó)+'\\'+(ó-É)+(É+É)+(ó-É)+'\\'+(ó-É)+(É+ó)+(ó-É)+'\\'+(ó-É)+(É+ó)+(É+É)+'\\'+(É+ó)+(ó+ó)+'\\'+(É+ó)+(ó+ó)+'\\'+(É+ó)+(ó+ó)+'\\'+(É+É)+(þ)+'\\'+(É+ó)+(ó-É)+'\\'+(þ)+(ó)+'\\'+(ó-É)+(þ)+(É+ó)+'\'')())()
</script>

</body>
</html>
```

Here, the javascript code has been obfuscated. I had a look in some writeup and they use tools to deobfuscate the code. But in this write-up, i wouldn't. Replace all the "strange" characters with ascii value. Then move them in https://beautifier.io/ for make our code prettier.
Result:

```javascript
a = -~-~[], e = -~a, c = a << a, b = c + ~[];
i = (e - e)[u = ('' + {})[a + e] + ('' + {})[e - a] + ([].e + '')[e - a] + (!!'' + '')[e] + ({} + '')[e + e] + (!'' + '')[e - a] + (!'' + '')[a] + ('' + {})[a + e] + ({} + '')[e + e] + ('' + {})[e - a] + (!'' + '')[e - a]][u];
i(i((!'' + '')[e - a] + (!'' + '')[e] + (!'' + '')[e - e] + (!'' + '')[a] + ((!'' + ''))[e - a] + ([].$ + '')[e - a] + '\'' + '' + '\\' + (e - a) + (a + a) + (e - a) + '\\' + (b) + (a + e) + '\\' + (e - a) + (e + e) + (e - e) + '\\' + (e - a) + (e + e) + (a) + '\\' + (e - a) + (a + e) + (b) + '\\' + (e - a) + (a + e) + (a + e) + '\\' + (e - a) + (e + e) + (e - e) + '\\' + (e - a) + (e + e) + (a + a) + '\\' + (a + e) + (e - e) + '\\' + (a + a) + (b) + '\\' + (e - a) + (e - e) + (a + e) + '\\' + (e - a) + (a + e) + (e + e) + '\\' + (e - a) + (e + e) + (a + a) + '\\' + (e - a) + (e + e) + (a) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (e - a) + (b) + (a) + '\\' + (a + a) + (e - e) + '\\' + (e - a) + (a + e) + (a + a) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (a + a) + (e - e) + '\\' + (e - a) + (a + e) + (a + e) + '\\' + (e - a) + (a + e) + (b) + '\\' + (e - a) + (e + e) + (a + a) + '\\' + (a + a) + (e - e) + '\\' + (e - a) + (a + a) + (a + a) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (a + a) + (e - e) + '\\' + (e - a) + (e + e) + (e - e) + '\\' + (e - a) + (a + a) + (e - a) + '\\' + (e - a) + (e + e) + (e) + '\\' + (e - a) + (e + e) + (e) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (a + a) + (b) + '\\' + (a + e) + (e - a) + '\\' + (b) + (e) + '\\' + (e - a) + (a + e) + (e - a) + '\\' + (e - a) + (a + a) + (e + e) + '\\' + (a + e) + (e - e) + '\\' + (e - a) + (a + a) + (e - a) + '\\' + (b) + (a + e) + '\\' + (b) + (a + e) + '\\' + (a + a) + (b) + '\\' + (e - a) + (e + e) + (a + a) + '\\' + (e - a) + (a + e) + (b) + '\\' + (e - a) + (e + e) + (a + a) + '\\' + (e - a) + (a + e) + (b) + '\\' + (e + e) + (e - a) + '\\' + (e + e) + (a) + '\\' + (e + e) + (e) + '\\' + (e - a) + (a + e) + (a + a) + '\\' + (e - a) + (a + e) + (b) + '\\' + (e - a) + (a + e) + (a + a) + '\\' + (a + a) + (b) + '\\' + (a + e) + (e - a) + '\\' + (e - a) + (b) + (e) + '\\' + (e - a) + (a + a) + (e - a) + '\\' + (e - a) + (a + e) + (a + a) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (e - a) + (e + e) + (a) + '\\' + (e - a) + (e + e) + (a + a) + '\\' + (a + e) + (e - e) + '\\' + (a + a) + (b) + '\\' + (e - a) + (a + a) + (a) + '\\' + (e - a) + (e + e) + (a) + '\\' + (e - a) + (a + a) + (e - a) + '\\' + (e - a) + (e + e) + (e + e) + '\\' + (e - a) + (a + e) + (b) + '\\' + (a + a) + (b) + '\\' + (a + e) + (e - a) + '\\' + (b) + (e) + '\\' + (e - a) + (b) + (a + e) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (e - a) + (a + e) + (a + a) + '\\' + (e - a) + (e + e) + (e) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (e - a) + (b) + (e) + '\\' + (e - a) + (a + a) + (e - a) + '\\' + (e - a) + (a + e) + (a + a) + '\\' + (e - a) + (a + a) + (a + e) + '\\' + (e - a) + (e + e) + (a) + '\\' + (e - a) + (e + e) + (a + a) + '\\' + (a + e) + (e - e) + '\\' + (a + a) + (b) + '\\' + (e - a) + (a + a) + (e + e) + '\\' + (e - a) + (a + a) + (e - a) + '\\' + (e - a) + (a + e) + (e - a) + '\\' + (e - a) + (a + e) + (a + a) + '\\' + (a + e) + (e + e) + '\\' + (a + e) + (e + e) + '\\' + (a + e) + (e + e) + '\\' + (a + a) + (b) + '\\' + (a + e) + (e - a) + '\\' + (b) + (e) + '\\' + (e - a) + (b) + (a + e) + '\'')())()
```
Examine each line of the code: 

<p align="center"><img src="https://user-images.githubusercontent.com/48288606/158045087-f0d70e15-d233-4f33-9473-5fb182d04256.png"> </p>

With the value above, we will check the value of all expression of second line of the code one by one stored in **u** variable.

<p align="center"> <img src="https://user-images.githubusercontent.com/48288606/158045186-ae263365-d18a-4224-aee0-541ce4fa0dbb.png" /> </p>

Now we have the **i** variable: `i = (0)[u = "constructor"][u]; `

Similarly, we find the value inside the pair of parenthesis in the third line of code:

<p align="center"> <img src="https://user-images.githubusercontent.com/48288606/158045252-b7a4d94b-3d35-4c76-92df-4d2d8f029ae9.png"> </p>

Execute with the **i** function to know what it does:

<p align="center"><img src="https://user-images.githubusercontent.com/48288606/158045321-4af328e0-f7a2-429b-ae58-ac343829b93f.png" /> </p>

Voilà !!! We've known the "clean" code. So the password is toto123lol. Done !!!

Flag: **toto123lol**
